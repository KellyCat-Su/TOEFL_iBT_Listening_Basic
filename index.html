<!doctype html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ‰˜ç¦å¬åŠ›å•è¯æµ‹è¯•ï¼ˆåˆçº§ï¼‰</title>
    <style>
      /* å…¬å…±æ ·å¼ */
      body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 0;
        padding: 20px;
        background: #877071;
      }
      .container {
        position: relative;
        margin: auto;
        max-width: 900px;
        padding: 20px;
        border-radius: 10px;
        background: #f5ebeb;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #3e2723;
      }
      #mode-buttons button {
        margin: 0 10px;
        padding: 10px 20px;
        font-size: 16px;
        border: none;
        border-radius: 5px;
        background: #877071;
        color: #fff;
        cursor: pointer;
      }
      #mode-buttons button:hover {
        background: #d5b4b5;
      }
      .grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
        margin-top: 20px;
      }
      .card {
        padding: 15px;
        border: 2px solid #877071;
        border-radius: 5px;
        background: #e4d0d0;
        cursor: default;
        transition: background 0.3s;
        line-height: 1.5;
        color: #3e2723;
      }
      h2 {
        color: #3e2723;
      }
      p {
        color: #3e2723;
      }
      /* æ¶ˆæ¶ˆä¹æ ·å¼ */
      .card.match {
        visibility: hidden;
      }
      .card.selected {
        background: #f5ebeb;
      }
      /* å¬å¬ä¹æ ·å¼ */
      #audio-mode #options-area {
        display: grid;
        grid-template-columns: repeat(2, minmax(120px, 200px));
        gap: 10px;
        margin: 20px auto 0;
        justify-content: center; /* æ°´å¹³æ•´ä½“å±…ä¸­ */
        justify-items: center; /* æ¯ä¸ªæŒ‰é’®åœ¨å•å…ƒæ ¼ä¸­å±…ä¸­ */
      }
      #options-area button {
        display: block;
        margin: 10px auto;
        padding: 10px 20px;
        font-size: 16px;
        border: none;
        border-radius: 5px;
        background: #d5b4b5;
        color: #3e2723;
        cursor: pointer;
      }
      #options-area button.correct {
        background: #4caf50;
      }
      #options-area button.wrong {
        background: #f44336;
      }
      #options-area button:disabled {
        cursor: default;
        opacity: 0.8;
      }
      /* æ§åˆ¶æŒ‰é’®ç»Ÿä¸€æ ·å¼ */
      #audio-controls button {
        margin: 0 10px;
        padding: 10px 20px;
        font-size: 14px;
        border: none;
        border-radius: 5px;
        background: #877071;
        color: #fff;
        cursor: pointer;
      }
      #back-btn-area button {
        margin: 20px 10px;
        padding: 10px 20px;
        font-size: 14px;
        border: none;
        border-radius: 5px;
        background: #877071;
        color: #fff;
        cursor: pointer;
      }
      #result-btn-area button {
        margin: 5px;
        padding: 8px 16px;
        font-size: 14px;
        border: none;
        border-radius: 5px;
        background: #ab47bc;
        color: #fff;
        cursor: pointer;
      }
      #audio-controls button:hover {
        background: #d5b4b5;
      }
      #back-btn-area button:hover {
        background: #d5b4b5;
      }
      #result-btn-area button:hover {
        background: #9c27b0;
      }
      #audio-status {
        font-size: 14px;
        margin-bottom: 10px;
      }
      /* é”™è¯¯æ€»ç»“åˆ—è¡¨ */
      ul.error-list {
        list-style: none;
        padding-left: 0;
        text-align: left;
      }
      ul.error-list li {
        margin: 5px 0;
      }
      /* é”™è¯¯é¡µæŒ‰é’®å±…ä¸­ */
      #result-btn-area {
        text-align: center;
        margin-top: 20px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 id="main-title">Word Zone</h1>
      <div id="mode-buttons">
        <button onclick="refreshLearningMode()">Refresh</button>
        <button onclick="startMatchGame()">Match-Up</button>
        <button onclick="startAudioGame()">Listen & Select</button>
      </div>
      <!-- å­¦ä¹ æ¨¡å¼ -->
      <div id="learning-mode"></div>
      <!-- æ¶ˆæ¶ˆä¹æ¨¡å¼ -->
      <div id="match-mode" style="display: none">
        <div id="match-header">
          <h2>Match-Up</h2>
          <p>Match the English words with their Chinese meanings</p>
        </div>
        <div id="game-grid"></div>
        <div id="back-btn-area">
          <button onclick="refreshLearningMode()">Back to Word Zone</button>
        </div>
      </div>
      <!-- å¬å¬ä¹æ¨¡å¼ -->
      <div id="audio-mode" style="display: none">
        <div id="audio-header">
          <h2>Listen & Select</h2>
          <p>Select the right Chinese meaning by the word's pronunciation</p>
        </div>
        <div id="options-area"></div>
        <div id="audio-controls">
          <div id="audio-status"></div>
          <button onclick="replayAudio()">Listen Again</button>
          <button onclick="refreshLearningMode()">Back to Word Zone</button>
        </div>
      </div>
    </div>

    <script>
    // è¯åº“ç¤ºä¾‹
    const WORD_LIST = [
      { en: 'atmosphere', zh: 'ç©ºæ°”ï¼›æ°”æ°›' }, { en: 'geography', zh: 'åœ°ç†ï¼›åœ°ç†å­¦' }, { en: 'climatology', zh: 'æ°”å€™å­¦' }, { en: 'syllabus', zh: 'æ•™å­¦å¤§çº²ï¼Œè¯¾ç¨‹å¤§çº²' }, { en: 'masterpiece', zh: 'æ°ä½œï¼›æå¥½çš„ä¾‹å­' }, { en: 'aerosol', zh: 'å–·é›¾å‰‚ï¼›æ°”æº¶èƒ¶' }, { en: 'participation', zh: 'å‚åŠ ' }, { en: 'tapestry', zh: 'ï¼ˆæ‰‹ç»‡çš„ï¼‰èŠ±æ¯¯ï¼›ç»’ç»£' }, { en: 'portion', zh: 'ä¸€éƒ¨åˆ†ï¼›ä¸€ä»½' }, { en: 'requirement', zh: 'éœ€è¦ï¼›è§„å®š' }, { en: 'aerial', zh: 'ï¼ˆæ— çº¿ç”µæˆ–ç”µè§†çš„ï¼‰å¤©çº¿ï¼›ç©ºä¸­çš„' }, { en: 'bombardment', zh: 'è¿ç»­è½°ç‚¸ï¼›è¿ç»­æé—®' }, { en: 'wrench', zh: 'çŒ›æ‰¯ï¼›æ‹†æ•£' }, { en: 'display', zh: 'æ’åˆ—ï¼›æ˜¾ç¤ºï¼›é™ˆåˆ—å“ï¼›è¡¨æ¼”' }, { en: 'mixture', zh: 'æ··åˆç‰©ï¼›åˆå‰‚' }, { en: 'approval', zh: 'èµåŒï¼›æ‰¹å‡†' }, 
       { en: 'climate', zh: 'æ°”å€™ï¼›é£å°š' }, { en: 'global', zh: 'å…¨çƒçš„ï¼›æ•´ä½“çš„' }, { en: 'temperature', zh: 'æ¸©åº¦ï¼›ä½“æ¸©ï¼›æ¿€çƒˆç¨‹åº¦' }, { en: 'decade', zh: 'åå¹´' }, { en: 'environment', zh: 'è‡ªç„¶ç¯å¢ƒï¼›å‘¨å›´çŠ¶å†µ' }, { en: 'semester', zh: 'å­¦æœŸ' }, { en: 'hand out', zh: 'åˆ†å‘ï¼Œå‘æ”¾' }, { en: 'participation', zh: 'å‚ä¸' }, { en: 'physical geography', zh: 'è‡ªç„¶åœ°ç†å­¦' }, { en: 'astronomy', zh: 'å¤©æ–‡å­¦' }, { en: 'mathematical ideas', zh: 'æ•°å­¦æ€æƒ³' }, { en: 'be nervous of', zh: 'ç´§å¼ ï¼›æ‹…å¿ƒ' }, { en: 'thoroughly', zh: 'å®Œå…¨ï¼›ä»”ç»†åœ°' }, { en: 'grade', zh: 'ç­‰çº§ï¼›åˆ†æ•°ï¼›å¹´çº§' }, { en: 'freshman', zh: 'ï¼ˆä¸­å­¦æˆ–å¤§å­¦çš„ï¼‰ä¸€å¹´çº§æ–°ç”Ÿï¼›æ–°æ‰‹' }, { en: 'hold on', zh: 'åšæŒä¸‹å»ï¼›ç­‰ä¸€ä¸‹' }, { en: 'sociology', zh: 'ç¤¾ä¼šå­¦' }, { en: 'suggest', zh: 'æè®®ï¼›å»ºè®®ï¼›æš—ç¤º' }, { en: 'recommendation', zh: 'æ¨èï¼›å»ºè®®' }, { en: 'application', zh: 'ï¼ˆé€šå¸¸æŒ‡ä¹¦é¢çš„ï¼‰ç”³è¯·ï¼›åº”ç”¨è½¯ä»¶' }, { en: 'volunteer', zh: 'å¿—æ„¿è€…ï¼›è‡ªæ„¿åšï¼Œä¸»åŠ¨æå‡ºåš' }, { en: 'underprivileged', zh: 'è´«å›°çš„ï¼›å±äºå¼±åŠ¿ç¾¤ä½“çš„' }, { en: 'oral', zh: 'å£å¤´çš„ï¼›å£è¯•' }, { en: 'submit', zh: 'æäº¤ï¼›å±ˆæœ' }, { en: 'specific', zh: 'ç‰¹å®šçš„ï¼›ç¡®åˆ‡çš„' }, { en: 'explore', zh: 'æ¢ç´¢ï¼›æ¢è®¨' }, { en: 'briefly', zh: 'ç®€çŸ­åœ°ï¼›ç®€è¨€ä¹‹' }, { en: 'disturb', zh: 'å¹²æ‰°ï¼›ä½¿ç„¦è™‘' }, { en: 'evolution', zh: 'æ¼”åŒ–ï¼›å‘å±•' }, { en: 'opportunity', zh: 'æœºä¼šï¼›æœºé‡' }, { en: 'combine', zh: 'ï¼ˆä½¿ï¼‰ç»“åˆï¼›ï¼ˆä½¿ï¼‰åˆå¹¶ï¼›è”åˆä¼ä¸š' } // Unit 1 è¡¥å…… 
    ];

      // å…¨å±€çŠ¶æ€
      let currentWords = []
      let qIndex = 0
      let errors = []
      let matchCards = []
      let sel = []
      let currentAudioWord = ""

      // æ´—ç‰Œ
      function shuffle(arr) {
        return arr.sort(() => 0.5 - Math.random())
      }

      // åˆå§‹åŒ–å­¦ä¹ æ¨¡å¼ï¼šå–ä¸é‡å¤çš„16ä¸ªå•è¯
      function refreshLearningMode() {
        document.getElementById("main-title").style.display = "block"
        currentWords = shuffle(WORD_LIST.slice()).slice(0, 16)
        document.getElementById("learning-mode").innerHTML =
          '<div class="grid">' +
          currentWords
            .map((w) => `<div class="card">${w.en}<br>${w.zh}</div>`)
            .join("") +
          "</div>"
        document.getElementById("learning-mode").style.display = "block"
        document.getElementById("match-mode").style.display = "none"
        document.getElementById("audio-mode").style.display = "none"
        document.getElementById("mode-buttons").style.display = "block"
      }

      /* â€”â€” æ¶ˆæ¶ˆä¹æ¨¡å¼ â€”â€” */
      function startMatchGame() {
        if (currentWords.length < 16) return
        document.getElementById("main-title").style.display = "none"
        document.getElementById("match-header").style.display = "block"
        document.getElementById("back-btn-area").style.display = "block"
        sel = []
        errors = []
        matchCards = []
        currentWords.forEach((w) => {
          matchCards.push({ t: w.en, key: w.en })
          matchCards.push({ t: w.zh, key: w.en })
        })
        matchCards = shuffle(matchCards)
        renderMatch()
        document.getElementById("learning-mode").style.display = "none"
        document.getElementById("mode-buttons").style.display = "none"
        document.getElementById("match-mode").style.display = "block"
      }

      function renderMatch() {
        document.getElementById("game-grid").innerHTML =
          '<div class="grid">' +
          matchCards
            .map(
              (c, i) =>
                `<div class="card${c.m ? " match" : ""}" id="m${i}" onclick="pick(${i})">${c.t}</div>`,
            )
            .join("") +
          "</div>"
      }

      function pick(i) {
        if (matchCards[i].m) return
        sel.push(i)
        document.getElementById(`m${i}`).classList.add("selected")
        if (sel.length === 2) setTimeout(checkMatch, 300)
      }

      function checkMatch() {
        const [a, b] = sel
        if (
          matchCards[a].key === matchCards[b].key &&
          matchCards[a].t !== matchCards[b].t
        ) {
          matchCards[a].m = matchCards[b].m = true
        } else {
          errors.push(matchCards[a].key)
        }
        sel.forEach((i) =>
          document.getElementById(`m${i}`).classList.remove("selected"),
        )
        sel = []
        renderMatch()
        if (matchCards.every((c) => c.m)) setTimeout(showMatchResults, 500)
      }

      function showMatchResults() {
        document.getElementById("match-header").style.display = "none"
        document.getElementById("back-btn-area").style.display = "none"
        let html = `<h2>Words for Revision</h2>`
        if (errors.length) {
          html +=
            '<ul class="error-list">' +
            [...new Set(errors)]
              .map((en) => {
                const w = currentWords.find((w) => w.en === en)
                return `<li>${w.en} - ${w.zh}</li>`
              })
              .join("") +
            "</ul>"
        } else {
          html += "<p>Congratulationsï¼</p>"
        }
        html +=
          '<div id="result-btn-area">' +
          '<button onclick="refreshLearningMode()">Back to Word Zone</button>' +
          "</div>"
        document.getElementById("game-grid").innerHTML = html
      }

      /* â€”â€” å¬å¬ä¹æ¨¡å¼ â€”â€” */
      function startAudioGame() {
        if (currentWords.length < 16) return
        document.getElementById("main-title").style.display = "none"
        document.getElementById("audio-header").style.display = "block"
        document.getElementById("audio-controls").style.display = "block"
        qIndex = 0
        errors = []
        shuffle(currentWords)
        showQuestion()
        document.getElementById("learning-mode").style.display = "none"
        document.getElementById("mode-buttons").style.display = "none"
        document.getElementById("match-mode").style.display = "none"
        document.getElementById("audio-mode").style.display = "block"
      }

      function showQuestion() {
        if (qIndex >= currentWords.length) {
          showAudioResults()
          return
        }
        const word = currentWords[qIndex]
        currentAudioWord = word.en
        speechSynthesis.speak(new SpeechSynthesisUtterance(currentAudioWord))
        let opts = [word]
        while (opts.length < 4) {
          const r = WORD_LIST[Math.floor(Math.random() * WORD_LIST.length)]
          if (!opts.find((o) => o.zh === r.zh)) opts.push(r)
        }
        opts = shuffle(opts)
        document.getElementById("options-area").innerHTML = opts
          .map(
            (o) =>
              `<button onclick="choose(this,'${o.zh}','${word.zh}')">${o.zh}</button>`,
          )
          .join("")
        document.getElementById("audio-status").innerText =
          `Question ${qIndex + 1} of ${currentWords.length} `
      }

      function replayAudio() {
        if (currentAudioWord) {
          speechSynthesis.speak(new SpeechSynthesisUtterance(currentAudioWord))
        }
      }

      function choose(btn, chosen, correct) {
        Array.from(document.querySelectorAll("#options-area button")).forEach(
          (b) => (b.disabled = true),
        )
        if (chosen === correct) {
          btn.classList.add("correct")
        } else {
          btn.classList.add("wrong")
          errors.push(currentWords[qIndex].en)
          Array.from(document.querySelectorAll("#options-area button"))
            .find((b) => b.innerText === correct)
            .classList.add("correct")
        }
        setTimeout(() => {
          qIndex++
          showQuestion()
        }, 800)
      }

      function showAudioResults() {
        document.getElementById("audio-header").style.display = "none"
        document.getElementById("audio-controls").style.display = "none"
        let html = `<h2>Words for Revision</h2>`
        if (errors.length) {
          html +=
            '<ul class="error-list">' +
            [...new Set(errors)]
              .map((en) => {
                const w = WORD_LIST.find((w) => w.en === en)
                return `<li>${w.en} - ${w.zh}</li>`
              })
              .join("") +
            "</ul>"
        } else {
          html += "<p>Congratulationsï¼ğŸ‘</p>"
        }
        html +=
          '<div id="audio-controls"><button onclick="refreshLearningMode()">Back to Word Zone</button></div>'
        document.getElementById("audio-mode").innerHTML = html
      }

      window.onload = refreshLearningMode
    </script>
  </body>
</html>
